let i=$("#table-courses").length;function calTotal(){let e={};return $("#total div").each((t,o)=>{try{const t=o.children[1];if("total-points"===t.id&&"string"==typeof t.value&&""!=t.value){if(0,!+t.value)throw"Must textbox is number";e.totalPoint=+t.value}else if("total-credit"===t.id&&"string"==typeof t.value&&""!=t.value){if(0,!+t.value)throw"Must textbox is number";e.totalCredit=+t.value}}catch(e){console.log(e),$(`#${o.children[1].id}`).css({border:"1px solid #f00"}),setTimeout(()=>{$("#show-gpa").fadeOut(),$(`#${o.children[1].id}`).css({border:"1px solid #CED4DA"})},3e3)}}),e}function calculate(e){let t=0,o=0;if(e.length>0)for(const n of e)t+=n.grade*n.credit,o+=n.credit;const n=calTotal();n&&"totalPoint"in n&&"totalCredit"in n&&(t+=n.totalPoint,o+=n.totalCredit),innerHtml(t,o)}function innerHtml(e,t){let o=(e/t).toFixed(2);try{if(!(o>=0&&o<=4))throw"GPA must be between 0 and 4";$("#gpa").text(o),$("#show-gpa").show(),changeBorderColor(o)}catch(e){$(".alert-danger").text(e).fadeIn(),setTimeout(()=>{$(".alert-danger").fadeOut(),$("#show-gpa").fadeOut()},3e3)}}function changeBorderColor(e){e>=3.75&&e<4?$("#circle").css({borderColor:"#1e88e5"}):e>=3.5&&e>3.75?$("#circle").css({borderColor:"rgb(36,130,119)"}):e>=3&&e<3.5?$("#circle").css({borderColor:"#1ce9d0"}):e>=2.5&&e<3?$("#circle").css({borderColor:"#fb8500"}):e>=2&&e<2.5?$("#circle").css({borderColor:"#ffb703"}):e>=1.5&&e<2?$("#circle").css({borderColor:"#e5383b"}):e>=1&&e<1.5&&$("#circle").css({borderColor:"#e5383b"})}function append(e){$("#table-courses").append(e)}$(".alert-danger").hide(),$("#show-gpa").hide(),$("#calculate").click(function(e){const{target:t}=e;sumError=0;try{const e=t.parentElement.previousElementSibling.children;let o=[];if(e.length>0){sumError++;for(const t of e){let e={};for(const o of t.children)for(const t of o.children){let o=+t.value;if(t.classList.contains("credit")&&(o>15||o<0))throw"Credit must greater than 0 and less than 15 ";if(t.classList.contains("credit")&&""!=o)e.credit=o;else if(t.classList.contains("gpa")&&"-1"!=o)e.grade=o;else if(t.classList.contains("credit")&&""==o||t.classList.contains("gpa")&&"-1"==o)throw"Some fields is empty"}o.push(e)}calculate(o)}if(console.log(2===Object.keys(calTotal()).length),2===Object.keys(calTotal()).length&&(sumError++,calculate(o)),0===sumError)throw"Must add course"}catch(e){console.log(e),$(".alert-danger").text(e).fadeIn(),setTimeout(()=>{$(".alert-danger").fadeOut(),$("#show-gpa").fadeOut()},3e3)}}),$("#add-course").click(function(){if(i<=7){i++,append('\n    <div class="row mt-3 d-flex justify-content-around">\n      <div class="col-4">\n        <input type="text" class="form-control p-1">\n      </div>\n      <div class="col-2">\n        <input type="number" class="credit form-control p-1 text-center" required>\n      </div>\n      <div class="col-2">\n        <select class="gpa form-select" required>\n          <option value="-1">choose</option>\n          <option value="4">A+</option>\n          <option value="3.75">A</option>\n          <option value="3.5">B+</option>\n          <option value="3">B</option>\n          <option value="2.5">C+</option>\n          <option value="2">C</option>\n          <option value="1.5">D+</option>\n          <option value="1">D</option>\n        </select>\n      </div>\n      <div class="col-1">\n       <button class="remove btn btn-outline-danger">X</button>\n     </div>\n    </div>\n')}else alert("you cannot add more than 7 courses")}),$("body").click(function(e){const{target:t}=e;t.classList.contains("remove")&&(t.parentElement.parentElement.remove(),$("#show-gpa").hide(),i--)});